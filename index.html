<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8" />
<title>SW test</title>
<link rel="manifest" href="manifest.json" />
</head>

<body>

<p>Push endpoint:</p>
<p><textarea style="width: 90%" id="endpoint" autofocus></textarea></p>

<p><a href="send.php">Trigger notification</a></p>

<script>
navigator.serviceWorker.register('/sw-1.js', {scope: '/'}).then(function(reg) {
	reg.pushManager.subscribe({userVisibleOnly: true}).then(function(sub) {
		document.querySelector('#endpoint').value = sub.endpoint;
	});
}, console.warn.bind(console));
</script>

</body>

</html>
